<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Produk - Kasir Mini</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container my-4">
  <h4>Daftar Produk</h4>
  <button id="btnAdd" class="btn btn-primary mb-2">Tambah Produk</button>
  <table class="table" id="tableProducts">
    <thead><tr><th>#</th><th>Nama</th><th>Stok</th><th>Harga</th></tr></thead>
    <tbody></tbody>
  </table>
</div>
<script src="assets/js/api.js"></script>
<script>
if (!localStorage.getItem('token')) location='login.html';
async function load(){ 
  try{
    const rows = await apiFetch('/products');
    const tbody = document.querySelector('#tableProducts tbody');
    tbody.innerHTML = '';
    rows.forEach((r,i)=> tbody.innerHTML += `<tr><td>${i+1}</td><td>${r.nama_product}</td><td>${r.stok}</td><td>${r.harga_jual}</td></tr>`);
  }catch(e){ console.error(e); }
}
load();
</script>
</body>
</html>
